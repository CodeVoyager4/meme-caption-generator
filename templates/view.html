{% extends "base.html" %}

{% block title %}View Analysis{% endblock %}

{% block nav %}
<a href="/history">‚Üê Back to History</a>
<h1>Meme Analysis</h1>
<div></div>
{% endblock %}

{% block content %}
<div class="analysis-container">
    <div class="caption-section">
        <h2>{{ analysis.caption }}</h2>
    </div>
    
    <div class="image-comparison">
        <div class="original-image">
            <h3>Original Image</h3>
            <img src="{{ analysis.image_url }}" alt="Original image">
        </div>
        
        <div class="captioned-image">
            <h3>Captioned Version</h3>
            <img src="{{ url_for('serve_saved_image', filename=captioned_image) }}" 
                 alt="Captioned image">
        </div>
    </div>
    
    <div class="metadata-section">
        <div class="description">
            <h3>AI Description:</h3>
            <p>{{ analysis.description }}</p>
        </div>
        
        <div class="technical-details">
            <h3>Technical Details:</h3>
            <p>Model: {{ analysis.completion_data.model }}</p>
            <p>Created: {{ analysis.completion_data.created }}</p>
            {% if analysis.completion_data.response_ms %}
            <p>Response time: {{ analysis.completion_data.response_ms }}ms</p>
            {% endif %}
        </div>
    </div>
</div>

<div class="card">
    <form method="POST">
        <input class="url-input" type="text" name="image_url" 
               placeholder="Enter image URL to generate new caption" required>
        <button class="button" type="submit">Generate New Caption</button>
    </form>
    {% if error %}
    <div class="error">{{ error }}</div>
    {% endif %}
</div>
{% endblock %} 